<% @articles.each_with_index do |article,index| %>
  <div class="card mb-4 w-100 shadow">
    <div class="row no-gutters border-top border-info">

      <!-- photo -->
      <div class="col-md-2 ">
        <img src="<%= article.photo %>" class="card-img-top" style="height:100%;" onerror="this.src='https://sites.psu.edu/siowfa16/files/2016/10/spongebobreading-400x242-1hcywc4.jpg'"/>
      </div>

      <!-- title and content -->
      <div class="col-md-10">
        <div class="d-flex justify-content-between card-header">
          <div class="text-uppercase font-weight-bold">
            <%= article.title %>
          </div>
          <% unless article.rating.nil? %>
            <div> rating:
              <% article.rating.to_i.times do %>
              <i class="fas fa-star"></i>
              <%end %>
            </div>
          <% else %>
            <p>not rated yet</p>
          <%end %>
        </div>
        <div class="card card-body border-0" style="width: auto">
        <p class="card-text"> <%= article.content %> </p>
        </div>
      </div>

      <!-- comments dropdpwn -->
      <div class="col-md-12">
        <button class="btn btn-light btn-block btn-sm" type="button" data-toggle="collapse" data-target="#commentsfrom<%=index%>">
        show/hide comments <span class="badge badge-info badge-pill"> <%= article.comments.count unless article.comments.nil? %> </span>
        </button>
        <div class="collapse" id="commentsfrom<%=index%>">
          <ul class="list-group list-group-flush">
            <% unless article.comments.nil? %>
            <% article.comments.each do |comment| %>
            <li class="list-group-item"> " <%=comment%> "</li>
            <% end %>
            <% end %>
          </ul>
        </div>
      </div>
    </div>
  </div>
<% end %>
